language: python

cache: pip

python:
  - "2.7"
  - "3.5"
  - "3.6"

install:
  - sudo apt-get update
  - pip install -r requirements-dev.txt
  - pip install .
  
  # Show all packages, for debugging

before_script:
  # Download gmsh
  - wget http://gmsh.info/bin/Linux/gmsh-3.0.0-Linux64.tgz
  - tar xvf gmsh-3.0.0-Linux.tgz

  # Create porepy config file
  - echo 'config = {"gmsh_path": ~/gmsh-3.0.0-Linux/bin/gmsh}' > porepy_config.py 

  # add $HOME to $PYTHONPATH to make config file accessible
  - export PYTHONPATH=${HOME}:${PYTHONPATH}

script: 
  - python setup.py test

after_success:
  - coveralls
